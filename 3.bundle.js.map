{"version":3,"sources":["webpack:///./src/container/Login/authService.js","webpack:///./src/container/Dashboard/index.js","webpack:///./src/container/Dashboard/styles.css?009b","webpack:///./src/container/Dashboard/styles.css","webpack:///./src/container/Login/withAuth.js"],"names":["__webpack_require__","u","e","__esModule","default","AuthService","domain","_classCallCheck3","this","fetch","bind","login","getProfile","email","password","_this","method","body","_stringify2","then","res","setToken","token","_promise2","resolve","getToken","isTokenExpired","_jwtDecode2","exp","Date","now","err","key","value","idToken","localStorage","setItem","getItem","removeItem","url","options","headers","Accept","Content-Type","loggedIn","Authorization","_extends3","_checkStatus","response","json","status","error","Error","statusText","c","g","f","p","h","_components","_icons","_core","Auth","HOST","console","log","Dashboard","state","items","n","goToAddCalories","preventDefault","props","history","push","goToSummary","getDetail","uuid","logout","replace","a","t","d","i","s","r","load","x-auth","axios","get","data","setState","_this2","_react2","createElement","className","styles","container","NavMenu","username","user","title","section","map","item","Card","onClick","btnContainer","IconButton","color","aria-label","Assessment","style","fontSize","Button","variant","Add","React","Component","_withAuth2","content","module","hmr","transform","insertInto","locals","exports","version","sources","names","mappings","file","sourcesContent","sourceRoot","85","Object","defineProperty","o","l","AuthComponent","_React$Component","AuthWrapped","_possibleConstructorReturn3","__proto__","_getPrototypeOf2","call","_inherits3","_createClass3","profile"],"mappings":"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","file":"3.bundle.js","sourcesContent":["import decode from 'jwt-decode'\n\nexport default class AuthService {\n  constructor (domain) {\n    this.domain = domain || 'http://localhost:5000/api'\n    this.fetch = this.fetch.bind(this)\n    this.login = this.login.bind(this)\n    this.getProfile = this.getProfile.bind(this)\n  }\n\n  login (email, password) {\n    return this.fetch(`${this.domain}/users/login`, {\n      method: 'POST',\n      body: JSON.stringify({\n        email,\n        password\n      })\n    }).then(res => {\n      this.setToken(res.token)\n      return Promise.resolve(res)\n    })\n  }\n\n  loggedIn () {\n    const token = this.getToken()\n    return !!token && !this.isTokenExpired(token)\n  }\n\n  isTokenExpired (token) {\n    try {\n      const decoded = decode(token)\n      if (decoded.exp < Date.now() / 1000) {\n        return true\n      } else {\n        return false\n      }\n    } catch (err) {\n      return false\n    }\n  }\n\n  setToken (idToken) {\n    localStorage.setItem('id_token', idToken)\n  }\n\n  getToken () {\n    return localStorage.getItem('id_token')\n  }\n\n  logout () {\n    localStorage.removeItem('id_token')\n  }\n\n  getProfile () {\n    return decode(this.getToken())\n  }\n\n  fetch (url, options) {\n    const headers = {\n      'Accept': 'application/json',\n      'Content-Type': 'application/json'\n    }\n\n    if (this.loggedIn()) {\n      headers['Authorization'] = 'Bearer ' + this.getToken()\n    }\n\n    return fetch(url, {\n      headers,\n      ...options\n    })\n      .then(this._checkStatus)\n      .then(response => response.json())\n  }\n\n  _checkStatus (response) {\n    if (response.status >= 200 && response.status < 300) {\n      return response\n    } else {\n      var error = new Error(response.statusText)\n      error.response = response\n      throw error\n    }\n  }\n}\n","import AuthService from '../Login/authService'\nimport withAuth from '../Login/withAuth'\nconst Auth = new AuthService()\n\nimport React from 'react'\nimport axios from 'axios'\nimport styles from './styles.css'\nimport { Card, NavMenu} from '../../components'\n\nimport { Add, Assessment } from '@material-ui/icons'\nimport { Button, IconButton } from '@material-ui/core'\n\nconst HOST = process.env.API_URL\n\nconsole.log('HOST ===>', HOST)\n\n\nclass Dashboard extends React.Component {\n  state = {\n    items: []\n  }\n\n  componentDidMount () {\n    this.load()\n  }\n\n  async load () {\n    const token = localStorage.getItem('id_token')\n    const headers = { headers: { 'x-auth': token } }\n\n    const items = await axios.get(`${HOST}/api/meals`, headers).then(response => response.data)\n    this.setState({items})\n  }\n\n  goToAddCalories = e => {\n    e && e.preventDefault()\n    this.props.history.push('/add-calories')\n  }\n\n  goToSummary = e => {\n    e && e.preventDefault()\n    this.props.history.push('/summary')\n  }\n\n  getDetail = uuid => e => {\n    e && e.preventDefault()\n    this.props.history.push(`/detail/${uuid}`)\n  }\n\n  logout = e => {\n    Auth.logout()\n    this.props.history.replace('/login')\n  }\n\n  render () {\n    return (\n      <div className={styles.container}>\n        <NavMenu username={this.props.user.username} logout={this.logout} />\n        <h1 className={styles.title}>Consumo de calor√≠as</h1>\n        <div className={styles.section}>\n          {this.state.items.map(item => {\n            return <Card onClick={this.getDetail} key={item.uuid} data={item} />\n          })}\n          <div className={styles.btnContainer}>\n            <IconButton\n              color='primary'\n              aria-label='charts'\n              onClick={this.goToSummary}\n            >\n              <Assessment style={{ fontSize: '46px', color: '#ffc107' }} />\n            </IconButton>\n            <br />\n            <Button\n              variant='fab'\n              color='secondary'\n              aria-label='Add'\n              onClick={this.goToAddCalories}\n            >\n              <Add />\n            </Button>\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default withAuth(Dashboard)\n","\nvar content = require(\"!!../../../node_modules/css-loader/index.js??ref--6-2!./styles.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../node_modules/css-loader/index.js??ref--6-2!./styles.css\", function() {\n\t\tvar newContent = require(\"!!../../../node_modules/css-loader/index.js??ref--6-2!./styles.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(true);\n// imports\n\n\n// module\nexports.push([module.id, \".styles_container_2lyqBSJi4DxUXEYALKrPzk {\\n  /* border: 1px solid purple; */\\n}\\n\\n.styles_title_zrPztFIS903-H66HFv626 {\\n  text-align: center;\\n  color: #f44336;\\n}\\n\\n.styles_section_CVrXHjdFnpO9mbXsUd-Oz  {\\n  display: flex;\\n  width: 93%;\\n  margin: 0 auto;\\n  flex-wrap: wrap;\\n  padding: 1em;\\n}\\n\\n.styles_btnContainer_3i3JUmwCRG-ZHpfb3ZE94H {\\n  text-align: center;\\n  position: fixed;\\n  right: 2em;\\n  bottom: 2em;\\n}\\n\\n@media screen and (max-width: 1024px) {\\n  .styles_section_CVrXHjdFnpO9mbXsUd-Oz {\\n    width: 80%;\\n  }\\n}\\n\\n@media screen and (max-width: 768px) {\\n  .styles_section_CVrXHjdFnpO9mbXsUd-Oz {\\n    width: 73%;\\n  }\\n}\\n\\n@media screen and (max-width: 640px) {\\n  .styles_section_CVrXHjdFnpO9mbXsUd-Oz {\\n    width: 90%;\\n  }\\n}\\n\\n@media screen and (max-width: 376px) {\\n  .styles_section_CVrXHjdFnpO9mbXsUd-Oz {\\n    width: 90%;\\n    padding: 0;\\n  }\\n}\", \"\", {\"version\":3,\"sources\":[\"/Users/oscaroceguera/Documents/Repos/Examples/calorie_challenge/front/src/container/Dashboard/styles.css\"],\"names\":[],\"mappings\":\"AAAA;EACE,+BAA+B;CAChC;;AAED;EACE,mBAAmB;EACnB,eAAe;CAChB;;AAED;EACE,cAAc;EACd,WAAW;EACX,eAAe;EACf,gBAAgB;EAChB,aAAa;CACd;;AAED;EACE,mBAAmB;EACnB,gBAAgB;EAChB,WAAW;EACX,YAAY;CACb;;AAED;EACE;IACE,WAAW;GACZ;CACF;;AAED;EACE;IACE,WAAW;GACZ;CACF;;AAED;EACE;IACE,WAAW;GACZ;CACF;;AAED;EACE;IACE,WAAW;IACX,WAAW;GACZ;CACF\",\"file\":\"styles.css\",\"sourcesContent\":[\".container {\\n  /* border: 1px solid purple; */\\n}\\n\\n.title {\\n  text-align: center;\\n  color: #f44336;\\n}\\n\\n.section  {\\n  display: flex;\\n  width: 93%;\\n  margin: 0 auto;\\n  flex-wrap: wrap;\\n  padding: 1em;\\n}\\n\\n.btnContainer {\\n  text-align: center;\\n  position: fixed;\\n  right: 2em;\\n  bottom: 2em;\\n}\\n\\n@media screen and (max-width: 1024px) {\\n  .section {\\n    width: 80%;\\n  }\\n}\\n\\n@media screen and (max-width: 768px) {\\n  .section {\\n    width: 73%;\\n  }\\n}\\n\\n@media screen and (max-width: 640px) {\\n  .section {\\n    width: 90%;\\n  }\\n}\\n\\n@media screen and (max-width: 376px) {\\n  .section {\\n    width: 90%;\\n    padding: 0;\\n  }\\n}\"],\"sourceRoot\":\"\"}]);\n\n// exports\nexports.locals = {\n\t\"container\": \"styles_container_2lyqBSJi4DxUXEYALKrPzk\",\n\t\"title\": \"styles_title_zrPztFIS903-H66HFv626\",\n\t\"section\": \"styles_section_CVrXHjdFnpO9mbXsUd-Oz\",\n\t\"btnContainer\": \"styles_btnContainer_3i3JUmwCRG-ZHpfb3ZE94H\"\n};","import React from 'react'\nimport AuthService from './authService'\n\nexport default function withAuth (AuthComponent) {\n  const Auth = new AuthService('http://localhost:5000/api')\n\n  return class AuthWrapped extends React.Component {\n    constructor (props) {\n      super(props)\n      this.state = {\n        user: null\n      }\n    }\n\n    componentWillMount () {\n      if (!Auth.loggedIn()) {\n        this.props.history.replace('/login')\n      } else {\n        try {\n          const profile = Auth.getProfile()\n          this.setState({\n            user: profile\n          })\n        } catch (e) {\n          Auth.logout()\n          this.props.history.replace('/login')\n        }\n      }\n    }\n\n    render () {\n      if (this.state.user) {\n        return (\n          <AuthComponent history={this.props.history} user={this.state.user} {...this.props} />\n        )\n      } else {\n        return null\n      }\n    }\n  }\n}\n"],"sourceRoot":""}