{"version":3,"sources":["webpack:///./src/container/Login/authService.js","webpack:///./src/container/Calories/create.js","webpack:///./src/container/Calories/styles.css?6ed4","webpack:///./src/container/Calories/styles.css","webpack:///./src/container/Login/withAuth.js"],"names":["__webpack_require__","u","e","__esModule","default","AuthService","domain","_classCallCheck3","this","fetch","bind","login","getProfile","email","password","_this","method","body","_stringify2","then","res","console","log","setToken","token","_promise2","resolve","getToken","isTokenExpired","_jwtDecode2","exp","Date","now","err","key","value","idToken","localStorage","setItem","getItem","removeItem","url","options","headers","Accept","Content-Type","loggedIn","Authorization","_extends3","_checkStatus","response","json","status","error","Error","statusText","i","d","C","_styles","k","_recompose","_core","_","x","_components","E","_getUTCDate","Auth","getFoodUuid","data","item","find","label","uuid","x-auth","initialState","meal","inputValue","selectedItem","selectedFood","mealType","date","_format2","loading","foodCatalog","mealCatalog","CreateCalories","state","onChange","setState","_defineProperty3","target","name","handleKeyDown","event","_this$state","length","_keycode2","slice","handleInputChange","handleChange","_this$state2","indexOf","handleDelete","splice","onUpdate","_callee","_this$state3","_regenerator2","wrap","_context","prev","next","foods","props","match","params","axios","patch","sent","history","push","t0","catch","message","stop","_this2","o","apply","arguments","onSave","_callee2","_this$state4","_context2","post","l","onDelete","_callee3","_context3","delete","n","logout","replace","a","t","y","getDetail","load","all","get","_context4","f","h","mark","UTCDate","map","_context5","classes","_state","disabled","deafultDate","_react2","createElement","style","textAlign","marginTop","Circular","NavMenu","username","user","className","styles","title","Paper","elevation","root","TextField","margin","width","SimpleSelect","id","type","defaultValue","InputLabelProps","shrink","Autocomplete","placeholder","btnContainer","Button","deleteBtn","variant","onClick","color","React","Component","compose","withStyles","theme","padding","avatar","height","background","marginRight","withAuth","content","module","hmr","transform","insertInto","locals","exports","version","sources","names","mappings","file","sourcesContent","sourceRoot","section","avatarContainer","85","Object","defineProperty","r","s","AuthComponent","_React$Component","AuthWrapped","_possibleConstructorReturn3","__proto__","_getPrototypeOf2","call","_inherits3","_createClass3","profile","c"],"mappings":"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","file":"4.bundle.js","sourcesContent":["import decode from 'jwt-decode'\n\nexport default class AuthService {\n  constructor (domain) {\n    this.domain = domain || 'http://localhost:5000/api'\n    this.fetch = this.fetch.bind(this)\n    this.login = this.login.bind(this)\n    this.getProfile = this.getProfile.bind(this)\n  }\n\n  login (email, password) {\n    return this.fetch(`${this.domain}/users/login`, {\n      method: 'POST',\n      body: JSON.stringify({\n        email,\n        password\n      })\n    }).then(res => {\n      console.log('res ==>', res)\n      this.setToken(res.token)\n      return Promise.resolve(res)\n    })\n  }\n\n  loggedIn () {\n    const token = this.getToken()\n    return !!token && !this.isTokenExpired(token)\n  }\n\n  isTokenExpired (token) {\n    try {\n      const decoded = decode(token)\n      if (decoded.exp < Date.now() / 1000) {\n        return true\n      } else {\n        return false\n      }\n    } catch (err) {\n      return false\n    }\n  }\n\n  setToken (idToken) {\n    localStorage.setItem('id_token', idToken)\n  }\n\n  getToken () {\n    return localStorage.getItem('id_token')\n  }\n\n  logout () {\n    localStorage.removeItem('id_token')\n  }\n\n  getProfile () {\n    return decode(this.getToken())\n  }\n\n  fetch (url, options) {\n    const headers = {\n      'Accept': 'application/json',\n      'Content-Type': 'application/json'\n    }\n\n    if (this.loggedIn()) {\n      headers['Authorization'] = 'Bearer ' + this.getToken()\n    }\n\n    return fetch(url, {\n      headers,\n      ...options\n    })\n      .then(this._checkStatus)\n      .then(response => response.json())\n  }\n\n  _checkStatus (response) {\n    if (response.status >= 200 && response.status < 300) {\n      return response\n    } else {\n      var error = new Error(response.statusText)\n      error.response = response\n      throw error\n    }\n  }\n}\n","import AuthService from '../Login/authService'\nimport withAuth from '../Login/withAuth'\nconst Auth = new AuthService()\n\nimport React from 'react'\nimport { withStyles } from '@material-ui/core/styles'\nimport axios from 'axios'\nimport { compose } from 'recompose'\nimport { Paper, Avatar, Button, TextField } from '@material-ui/core'\nimport keycode from 'keycode'\nimport format from 'date-fns/format'\nimport { Autocomplete, SimpleSelect, Circular, NavMenu } from '../../components'\nimport styles from './styles.css'\nimport { UTCDate } from '../../helpers/getUTCDate'\n\nconst InlStyle = theme => ({\n  root: {\n    padding: '1em',\n    width: '50%',\n    margin: '0 auto'\n  },\n  avatar: {\n    padding: '.5em',\n    width: '100px',\n    height: '100px',\n    background: '#651fff'\n  },\n  deleteBtn: {\n    marginRight: '2em',\n    background: '#f44336',\n    color: 'white'\n  }\n})\n\nconst getFoodUuid = (data, item) => data.find(i => i.label === item).uuid\n\nconst token = localStorage.getItem('id_token')\nconst headers = { headers: { 'x-auth': token } }\n\nconst initialState = {\n  meal: '',\n  inputValue: '',\n  selectedItem: [],\n  selectedFood: [],\n  mealType: '',\n  date: '' || format(new Date(), 'YYYY-MM-dd'),\n  loading: false,\n  error: null,\n  foodCatalog: [],\n  mealCatalog: []\n}\n\nclass CreateCalories extends React.Component {\n  state = initialState\n\n  componentDidMount() {\n    const uuid = this.props.match.params.uuid\n\n    if (uuid) {\n     this.getDetail(uuid)\n    }\n\n    this.load()\n  }\n\n  async load () {\n    this.setState({ loading: true })\n\n    try {\n      const [foodCatalog, mealCatalog] = await Promise.all([\n        axios.get('http://localhost:5000/api/catalogs/foodTypes', headers).then(res => res.data),\n        axios.get('http://localhost:5000/api/catalogs/mealTypes', headers).then(res => res.data)\n      ])\n\n      this.setState({\n        loading: false,\n        foodCatalog,\n        mealCatalog\n      })\n    } catch(e) {\n      this.setState({\n        error: e.message,\n        loading: false\n      })\n    }\n  }\n\n  async getDetail (uuid) {\n    this.setState({ loading: true })\n    try {\n      const data = await axios.get(`http://localhost:5000/api/meals/${uuid}`, headers).then(res => res.data)\n      this.setState({\n        loading: false,\n        meal: data.meal,\n        mealType: data.mealType.uuid,\n        date: UTCDate(data.date, 'YYYY-MM-dd'),\n        selectedItem: data.foods.map(i => i.label),\n        selectedFood: data.foods.map(i => i.uuid)\n      })\n    } catch (e) {\n      this.setState({\n        error: e.message,\n        loading: false\n      })\n    }\n  }\n\n  onChange = e => {\n    this.setState({ [e.target.name]: e.target.value })\n  }\n\n  handleKeyDown = event => {\n    const { inputValue, selectedItem } = this.state\n    if (selectedItem.length && !inputValue.length && keycode(event) === 'backspace') {\n      this.setState({\n        selectedItem: selectedItem.slice(0, selectedItem.length - 1),\n      })\n    }\n  }\n\n  handleInputChange = event => {\n    this.setState({ inputValue: event.target.value })\n  }\n\n  handleChange = item => {\n    let { selectedItem, selectedFood } = this.state\n\n    if (selectedItem.indexOf(item) === -1) {\n      selectedItem = [...selectedItem, item]\n      selectedFood = [...selectedFood, getFoodUuid(this.state.foodCatalog, item)]\n    }\n  \n    this.setState({\n      inputValue: '',\n      selectedItem,\n      selectedFood\n    })\n  }\n\n  handleDelete = item => () => {\n    this.setState(state => {\n      const selectedItem = [...state.selectedItem]\n      const selectedFood = [...state.selectedFood]\n\n      selectedItem.splice(selectedItem.indexOf(item), 1)\n      selectedFood.splice(selectedFood.indexOf(getFoodUuid(this.state.foodCatalog, item)), 1)\n\n      return {\n        selectedItem,\n        selectedFood\n      }\n    })\n  }\n\n  onUpdate = async (e) => {\n    this.setState({ loading: true })\n\n    const { meal, selectedFood, mealType, date } = this.state\n    const data = { meal, foods: selectedFood, mealType, date }\n    const uuid = this.props.match.params.uuid\n\n    try {\n      const response = await axios.patch(`http://localhost:5000/api/meals/${uuid}`, data, headers)\n      this.setState({ loading: false })\n      this.props.history.push('/dashboard')\n    } catch (e) {\n      this.setState({\n        error: e.message,\n        loading: false\n      })\n    }\n  }\n\n  onSave = async (e) => {\n    this.setState({loading: true})\n\n    const {meal, selectedFood, mealType, date} = this.state\n    const data = { meal, foods: selectedFood, mealType, date }\n\n    try {\n      const response = await axios.post('http://localhost:5000/api/meals', data, headers)\n      this.setState({loading: false})\n      this.props.history.push('/dashboard')\n    } catch (e) {\n      this.setState({\n        error: e.message,\n        loading: false\n      })\n    }\n  }\n\n  onDelete = async (e) => {\n    this.setState({ loading: true })\n    const uuid = this.props.match.params.uuid\n\n    try {\n      const response = await axios.delete(`http://localhost:5000/api/meals/${uuid}`, headers)\n      this.setState({ loading: false })\n      this.props.history.push('/')\n    } catch (e) {\n      this.setState({\n        error: e.message,\n        loading: false\n      })\n    }\n  }\n\n  componentWillUnmount () {\n    this.setState(initialState)\n  }\n\n  logout = e => {\n    Auth.logout()\n    this.props.history.replace('/login')\n  }\n\n\n  render () {\n    const {classes} = this.props\n\n    const {\n      meal, mealType, selectedItem,\n      inputValue, selectedFood, loading,\n      error, date, foodCatalog, mealCatalog\n    } = this.state\n\n    const disabled = !!meal && !!mealType && selectedItem.length > 0\n    const deafultDate = !!date ? date : format(new Date(), 'YYYY-MM-dd')\n\n    if (loading) {\n      return (\n        <div style={{ textAlign: 'center', marginTop: '5em' }}>\n          <Circular />\n        </div>\n      )\n    }\n\n    if (error) return <p>{error}</p>\n\n    return (\n      <div>\n        <NavMenu username={this.props.user.username} logout={this.logout} />\n\n        <h1 className={styles.title} >Agregar Calorías</h1>\n        <Paper elevation={1} className={classes.root}>\n          <TextField\n            error={!this.state.meal}\n            name='meal'\n            label='Comida'\n            value={this.state.meal}\n            onChange={this.onChange}\n            margin='normal'\n            style={{width: '50%'}}\n          />\n          <SimpleSelect\n            data={mealCatalog}\n            label={'Tipo'}\n            name='mealType'\n            value={this.state.mealType}\n            onChange={this.onChange}\n          />\n          <TextField\n            id='date'\n            label='Fecha'\n            type='date'\n            name='date'\n            defaultValue={deafultDate}\n            onChange={this.onChange}\n            InputLabelProps={{\n              shrink: true,\n            }}\n          />\n          <Autocomplete\n            label='Alimentos'\n            placeholder='Seleccione multiples alimentos'\n            data={foodCatalog}\n            inputValue={inputValue}\n            selectedItem={selectedItem}\n            handleKeyDown={this.handleKeyDown}\n            handleInputChange={this.handleInputChange}\n            handleChange={this.handleChange}\n            handleDelete={this.handleDelete}\n          />\n          <div className={styles.btnContainer} >\n            {this.props.match.params.uuid &&\n              <Button\n                className={classes.deleteBtn}\n                name='mealType'\n                variant='contained'\n                onClick={this.onDelete}\n              >\n                Eliminar\n              </Button>\n            }\n            <Button \n              disabled={!disabled}\n              name='mealType'\n              variant='contained'\n              color='secondary'\n              onClick={this.props.match.params.uuid  ? this.onUpdate : this.onSave}\n            >\n              {this.props.match.params.uuid ? 'Actualizar' : 'Guardar'}\n            </Button>\n          </div>\n        </Paper>\n      </div>\n    )\n  }\n}\n\nexport default compose(\n  withStyles(InlStyle),\n  withAuth\n)(CreateCalories)\n","\nvar content = require(\"!!../../../node_modules/css-loader/index.js??ref--6-2!./styles.css\");\n\nif(typeof content === 'string') content = [[module.id, content, '']];\n\nvar transform;\nvar insertInto;\n\n\n\nvar options = {\"hmr\":true}\n\noptions.transform = transform\noptions.insertInto = undefined;\n\nvar update = require(\"!../../../node_modules/style-loader/lib/addStyles.js\")(content, options);\n\nif(content.locals) module.exports = content.locals;\n\nif(module.hot) {\n\tmodule.hot.accept(\"!!../../../node_modules/css-loader/index.js??ref--6-2!./styles.css\", function() {\n\t\tvar newContent = require(\"!!../../../node_modules/css-loader/index.js??ref--6-2!./styles.css\");\n\n\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\n\t\tvar locals = (function(a, b) {\n\t\t\tvar key, idx = 0;\n\n\t\t\tfor(key in a) {\n\t\t\t\tif(!b || a[key] !== b[key]) return false;\n\t\t\t\tidx++;\n\t\t\t}\n\n\t\t\tfor(key in b) idx--;\n\n\t\t\treturn idx === 0;\n\t\t}(content.locals, newContent.locals));\n\n\t\tif(!locals) throw new Error('Aborting CSS HMR due to changed css-modules locals.');\n\n\t\tupdate(newContent);\n\t});\n\n\tmodule.hot.dispose(function() { update(); });\n}","exports = module.exports = require(\"../../../node_modules/css-loader/lib/css-base.js\")(true);\n// imports\n\n\n// module\nexports.push([module.id, \".styles_title_Cg225NhCQWu0KPjk5hkVy {\\n  text-align: center;\\n  color: #f44336;\\n}\\n\\n.styles_btnContainer_1eKPDxqs7ePkWFRKQwXqXF {\\n  text-align: right;\\n  margin-top: .5em;\\n}\\n\\n.styles_section_1mp7qdNumzvPJCK1jHtwE8 {\\n  margin-top: .5em;\\n}\\n\\n.styles_avatarContainer_2tcZ4tbW-tszOuzgehAh31 {\\n  padding: 1em;\\n  display: flex;\\n  justify-content: center;\\n}\", \"\", {\"version\":3,\"sources\":[\"/Users/oscaroceguera/Documents/Repos/Examples/calorie_challenge/front/src/container/Calories/styles.css\"],\"names\":[],\"mappings\":\"AAAA;EACE,mBAAmB;EACnB,eAAe;CAChB;;AAED;EACE,kBAAkB;EAClB,iBAAiB;CAClB;;AAED;EACE,iBAAiB;CAClB;;AAED;EACE,aAAa;EACb,cAAc;EACd,wBAAwB;CACzB\",\"file\":\"styles.css\",\"sourcesContent\":[\".title {\\n  text-align: center;\\n  color: #f44336;\\n}\\n\\n.btnContainer {\\n  text-align: right;\\n  margin-top: .5em;\\n}\\n\\n.section {\\n  margin-top: .5em;\\n}\\n\\n.avatarContainer {\\n  padding: 1em;\\n  display: flex;\\n  justify-content: center;\\n}\"],\"sourceRoot\":\"\"}]);\n\n// exports\nexports.locals = {\n\t\"title\": \"styles_title_Cg225NhCQWu0KPjk5hkVy\",\n\t\"btnContainer\": \"styles_btnContainer_1eKPDxqs7ePkWFRKQwXqXF\",\n\t\"section\": \"styles_section_1mp7qdNumzvPJCK1jHtwE8\",\n\t\"avatarContainer\": \"styles_avatarContainer_2tcZ4tbW-tszOuzgehAh31\"\n};","import React from 'react'\nimport AuthService from './authService'\n\nexport default function withAuth (AuthComponent) {\n  const Auth = new AuthService('http://localhost:5000/api')\n\n  return class AuthWrapped extends React.Component {\n    constructor (props) {\n      super(props)\n      this.state = {\n        user: null\n      }\n    }\n\n    componentWillMount () {\n      if (!Auth.loggedIn()) {\n        this.props.history.replace('/login')\n      } else {\n        try {\n          const profile = Auth.getProfile()\n          console.log('profile', profile)\n          this.setState({\n            user: profile\n          })\n        } catch (e) {\n          Auth.logout()\n          this.props.history.replace('/login')\n        }\n      }\n    }\n\n    render () {\n      if (this.state.user) {\n        return (\n          <AuthComponent history={this.props.history} user={this.state.user} {...this.props} />\n        )\n      } else {\n        return null\n      }\n    }\n  }\n}\n"],"sourceRoot":""}